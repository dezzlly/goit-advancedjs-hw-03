{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '52905819-433962418f10cc5e4a65a61ca';\nconst BASE_URL = 'https://pixabay.com/api/';\n\n\nfunction buildUrl(query) {\nconst params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: '40'\n    });\n    return `${BASE_URL}?${params.toString()}`;\n}\n\n\n\nexport function fetchImages(query) {\n    const url = buildUrl(query);\n\n\n    return fetch(url)\n        .then(response => {\n            if (!response.ok) {\n                throw new Error(`HTTP ${response.status}`);\n            }\n            return response.json();\n        })\n        .catch(err => {\n            throw err;\n        });\n}","export function clearGallery(container) {\n    container.innerHTML = '';\n}\n\nexport function renderGallery(container, items) {\n    const markup = items\n    .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        return `\n        <li class=\"card\">\n        <a href=\"${largeImageURL}\" class=\"card-link\" aria-label=\"Відкрити зображення у повному розмірі\">\n        <img class=\"card-thumb\" src=\"${webformatURL}\" alt=\"${escapeHtml(tags)}\" loading=\"lazy\" />\n        </a>\n        <ul class=\"meta\">\n        <li><span>Likes</span><b>${likes}</b></li>\n        <li><span>Views</span><b>${views}</b></li>\n        <li><span>Comments</span><b>${comments}</b></li>\n        <li><span>Downloads</span><b>${downloads}</b></li>\n        </ul>\n        </li>`;\n    })\n    .join('');\n\n    container.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function toggleLoader(loaderEl, visible) {\n    loaderEl.classList.toggle('is-hidden', !visible);\n}\n\nfunction escapeHtml(str = '') {\n    return String(str)\n    .replaceAll('&', '&amp;')\n    .replaceAll('<', '&lt;')\n    .replaceAll('>', '&gt;')\n    .replaceAll('\"', '&quot;')\n    .replaceAll(\"'\", '&#039;');\n}","import { fetchImages } from './js/pixabay-api.js';\nimport { clearGallery, renderGallery, toggleLoader } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport './css/styles.css';\n\n\nconst refs = {\n    form: document.getElementById('search-form'),\n    input: document.getElementById('query'),\n    gallery: document.getElementById('gallery'),\n    loader: document.getElementById('loader'),\n};\n\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 200,\n    animationSpeed: 200,\n});\n\n\nrefs.form.addEventListener('submit', onSearchSubmit);\n\n\nfunction onSearchSubmit(e) {\n    e.preventDefault();\n    const query = refs.input.value.trim();\n\n\n    if (!query) {\n        iziToast.warning({\n            title: 'Увага',\n            message: 'Введіть пошуковий запит.',\n            position: 'topRight',\n        });\n        return;\n    }\n\n\n    toggleLoader(refs.loader, true);\n    clearGallery(refs.gallery);\n\n\n    fetchImages(query)\n    .then(data => {\n        const { hits = [] } = data || {};\n\n\n    if (!hits.length) {\n        iziToast.info({\n            title: 'Немає результатів',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight',\n        });\n        return;\n    }\n\n\n    renderGallery(refs.gallery, hits);\n    lightbox.refresh();\n    })\n    .catch(err => {\n    iziToast.error({\n        title: 'Помилка',\n        message: `Не вдалося завантажити зображення. ${err?.message || ''}`,\n        position: 'topRight',\n    });\n    })\n    .finally(() => {\n    toggleLoader(refs.loader, false);\n    });\n}"],"names":["API_KEY","BASE_URL","buildUrl","query","params","fetchImages","url","response","err","clearGallery","container","renderGallery","items","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","escapeHtml","toggleLoader","loaderEl","visible","str","refs","lightbox","SimpleLightbox","onSearchSubmit","e","iziToast","data","hits"],"mappings":"6vBAAA,MAAMA,EAAU,qCACVC,EAAW,2BAGjB,SAASC,EAASC,EAAO,CACzB,MAAMC,EAAS,IAAI,gBAAgB,CAC/B,IAAKJ,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,IACd,CAAK,EACD,MAAO,GAAGF,CAAQ,IAAIG,EAAO,SAAU,CAAA,EAC3C,CAIO,SAASC,EAAYF,EAAO,CAC/B,MAAMG,EAAMJ,EAASC,CAAK,EAG1B,OAAO,MAAMG,CAAG,EACX,KAAKC,GAAY,CACd,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAM,QAAQA,EAAS,MAAM,EAAE,EAE7C,OAAOA,EAAS,MAC5B,CAAS,EACA,MAAMC,GAAO,CACV,MAAMA,CAClB,CAAS,CACT,CChCO,SAASC,EAAaC,EAAW,CACpCA,EAAU,UAAY,EAC1B,CAEO,SAASC,EAAcD,EAAWE,EAAO,CAC5C,MAAMC,EAASD,EACd,IAAI,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,KACxD;AAAA;AAAA,mBAEIL,CAAa;AAAA,uCACOD,CAAY,UAAUO,EAAWL,CAAI,CAAC;AAAA;AAAA;AAAA,mCAG1CC,CAAK;AAAA,mCACLC,CAAK;AAAA,sCACFC,CAAQ;AAAA,uCACPC,CAAS;AAAA;AAAA,cAG3C,EACA,KAAK,EAAE,EAERV,EAAU,mBAAmB,YAAaG,CAAM,CACpD,CAEO,SAASS,EAAaC,EAAUC,EAAS,CAC5CD,EAAS,UAAU,OAAO,YAAa,CAACC,CAAO,CACnD,CAEA,SAASH,EAAWI,EAAM,GAAI,CAC1B,OAAO,OAAOA,CAAG,EAChB,WAAW,IAAK,OAAO,EACvB,WAAW,IAAK,MAAM,EACtB,WAAW,IAAK,MAAM,EACtB,WAAW,IAAK,QAAQ,EACxB,WAAW,IAAK,QAAQ,CAC7B,CC3BA,MAAMC,EAAO,CACT,KAAM,SAAS,eAAe,aAAa,EAC3C,MAAO,SAAS,eAAe,OAAO,EACtC,QAAS,SAAS,eAAe,SAAS,EAC1C,OAAQ,SAAS,eAAe,QAAQ,CAC5C,EAGMC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,IACd,eAAgB,GACpB,CAAC,EAGDF,EAAK,KAAK,iBAAiB,SAAUG,CAAc,EAGnD,SAASA,EAAeC,EAAG,CACvBA,EAAE,eAAc,EAChB,MAAM3B,EAAQuB,EAAK,MAAM,MAAM,KAAI,EAGnC,GAAI,CAACvB,EAAO,CACR4B,EAAS,QAAQ,CACb,MAAO,QACP,QAAS,2BACT,SAAU,UACtB,CAAS,EACD,MACH,CAGDT,EAAaI,EAAK,OAAQ,EAAI,EAC9BjB,EAAaiB,EAAK,OAAO,EAGzBrB,EAAYF,CAAK,EAChB,KAAK6B,GAAQ,CACV,KAAM,CAAE,KAAAC,EAAO,CAAA,GAAOD,GAAQ,CAAA,EAGlC,GAAI,CAACC,EAAK,OAAQ,CACdF,EAAS,KAAK,CACV,MAAO,oBACP,QAAS,2EACT,SAAU,UACtB,CAAS,EACD,MACH,CAGDpB,EAAce,EAAK,QAASO,CAAI,EAChCN,EAAS,QAAO,CACpB,CAAK,EACA,MAAMnB,GAAO,CACduB,EAAS,MAAM,CACX,MAAO,UACP,QAAS,uCAAsCvB,GAAA,YAAAA,EAAK,UAAW,EAAE,GACjE,SAAU,UAClB,CAAK,CACL,CAAK,EACA,QAAQ,IAAM,CACfc,EAAaI,EAAK,OAAQ,EAAK,CACnC,CAAK,CACL"}